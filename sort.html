<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>ä¸‰ç¨®æ’åºæ¼”ç®—æ³•å‹•ç•«æ¨¡æ“¬å™¨</title>
  <style>
    body { font-family: sans-serif; background: #f5f5f5; padding: 2rem; }
    .container { background: #fff; padding: 2rem; max-width: 960px; margin: auto; border-radius: 8px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
    .highlight { background-color: #4caf50; color: white; }
    table { width: 100%; margin-top: 1rem; border-collapse: collapse; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
    .code-box { background: #272822; color: #f8f8f2; padding: 1rem; border-radius: 6px; margin-top: 1rem; font-family: monospace; white-space: pre-wrap; }
    .active-code { background-color: #444; }
    .analysis { background: #eef7ff; padding: 1rem; margin-top: 1rem; border-left: 5px solid #007acc; }
  </style>
</head>
<body>
<div class="container">
  <h2>ä¸‰ç¨®æ’åºæ¼”ç®—æ³•å‹•ç•«æ¨¡æ“¬å™¨</h2>
  <label>é¸æ“‡æ¼”ç®—æ³•ï¼š
    <select id="algoSelect" onchange="init()">
      <option value="selection">ğŸ” é¸æ“‡æ’åº</option>
      <option value="bubble">ğŸ«§ æ³¡æ³¡æ’åº</option>
      <option value="insertion">ğŸ§© æ’å…¥æ’åº</option>
    </select>
  </label>
  <input type="text" id="arrayInput" value="5,3,8,4,2">
  <button onclick="init()">ğŸ”ƒ é‡è¨­</button>
  <button onclick="step()">ğŸ§­ ä¸‹ä¸€æ­¥</button>

  <table>
    <thead><tr><th>ç´¢å¼•</th><th>æ•¸å€¼</th><th>ç‹€æ…‹</th></tr></thead>
    <tbody id="arrayTable"></tbody>
  </table>

  <div id="stateInfo" style="margin-top:1rem; font-weight:bold;"></div>
  <div id="actionInfo" style="margin-top:0.5rem; color:#007acc;"></div>

  <div class="code-box" id="codeBox"></div>
  <div class="analysis" id="analysisBox"></div>
</div>

<script>
let arr = [], i = 0, j = 0, minIdx = 0, key;
let algo = 'selection';

const codeBox = document.getElementById('codeBox');
const analysisBox = document.getElementById('analysisBox');
const actionBox = document.getElementById('actionInfo');

const codes = {
  selection: {
    code: `for (int i = 0; i < n - 1; i++) {
  int min = i;
  for (int j = i + 1; j < n; j++) {
    if (arr[j] < arr[min]) {
      min = j;
    }
  }
  swap(arr[i], arr[min]);
}`,
  analysis: `ğŸ” <strong>é¸æ“‡æ’åºåˆ†æ</strong><br><br>
  ğŸ“ˆ æ™‚é–“è¤‡é›œåº¦ï¼š<br>
  æœ€ä½³ï¼šO(nÂ²)<br>
  å¹³å‡ï¼šO(nÂ²)<br>
  æœ€å·®ï¼šO(nÂ²)ï¼ˆä¸è«–è³‡æ–™æ˜¯å¦å·²æ’åºï¼Œæ¯æ¬¡éƒ½éœ€æ‰¾å‡ºæœ€å°å€¼ï¼‰<br><br>
  ğŸ’¾ ç©ºé–“è¤‡é›œåº¦ï¼š<br>
  O(1)ï¼ˆåŸåœ°æ’åºï¼Œç„¡éœ€é¡å¤–è¨˜æ†¶é«”ï¼‰<br><br>
  ğŸ“Œ è£œå……èªªæ˜ï¼š<br>
  ç‚ºä¸ç©©å®šæ’åºã€‚<br>
  æ¯å›åˆéƒ½æ‰¾å‡ºå‰©é¤˜å…ƒç´ ä¸­æœ€å°è€…ä¸¦æ”¾åˆ°å‰é¢ã€‚<br>
  å› ç‚ºæ¯æ¬¡éƒ½è¦æƒææœªæ’åºçš„è³‡æ–™ï¼Œå› æ­¤æ™‚é–“è¤‡é›œåº¦å›ºå®šç‚º O(nÂ²)ã€‚`},
  bubble: {
    code: `for (int i = 0; i < n - 1; i++) {
  bool swapped = false;  // äº¤æ›æ¨™èªŒ
  for (int j = 0; j < n - i - 1; j++) {
    if (arr[j] > arr[j+1]) {
      swap(arr[j], arr[j+1]);
      swapped = true;  // è¨­ç½® swapped ç‚º true
    }
  }
  if (!swapped) {
    break;  // æ²’æœ‰äº¤æ›ï¼Œæå‰çµæŸ
  }
}`,
    analysis: `ğŸ«§ <strong>æ³¡æ³¡æ’åºåˆ†æ</strong><br><br>
    ğŸ“ˆ æ™‚é–“è¤‡é›œåº¦ï¼š<br>
    æœ€ä½³ï¼šO(n)<br>
    å¹³å‡ï¼šO(nÂ²)<br>
    æœ€å·®ï¼šO(nÂ²)<br><br>
    ğŸ’¾ ç©ºé–“è¤‡é›œåº¦ï¼š<br>
    O(1)ï¼ˆåŸåœ°äº¤æ›ï¼Œç„¡éœ€é¡å¤–è¨˜æ†¶é«”ï¼‰<br><br>
    ğŸ“Œ è£œå……èªªæ˜ï¼š<br>
    ç‚ºç©©å®šæ’åºã€‚<br>
    è—‰ç”±ç›¸é„°å…ƒç´ äº¤æ›ï¼Œå¤§çš„å…ƒç´ é€æ­¥ã€Œå†’æ³¡ã€åˆ°å³å´ã€‚<br>
    è‹¥è³‡æ–™å·²æ’åºï¼Œæœƒé€éæ——æ¨™æå‰çµæŸï¼Œæ•ˆç‡é«˜ã€‚`},

  insertion: {
    code: `for (int i = 1; i < n; i++) {
  int key = arr[i];
  int j = i - 1;
  while (j >= 0 && arr[j] > key) {
    arr[j+1] = arr[j];
    j--;
  }
  arr[j+1] = key;
}`,
    analysis: `ğŸ§© <strong>æ’å…¥æ’åºåˆ†æ</strong><br><br>
    ğŸ“ˆ æ™‚é–“è¤‡é›œåº¦ï¼š<br>
    æœ€ä½³ï¼šO(n)<br>
    å¹³å‡ï¼šO(nÂ²)<br>
    æœ€å·®ï¼šO(nÂ²)<br><br>
    ğŸ’¾ ç©ºé–“è¤‡é›œåº¦ï¼š<br>
    O(1)ï¼ˆåŸåœ°æ’å…¥ï¼Œç„¡éœ€é¡å¤–è¨˜æ†¶é«”ï¼‰<br><br>
    ğŸ“Œ è£œå……èªªæ˜ï¼š<br>
    ç‚ºç©©å®šæ’åºã€‚<br>
    é¡ä¼¼äººé¡æ•´ç†æ’²å…‹ç‰Œæ™‚çš„æ’ç‰Œå‹•ä½œã€‚<br>
    å°æ–¼å¹¾ä¹æ’åºå¥½çš„è³‡æ–™è¡¨ç¾ç‰¹åˆ¥å„ªç§€ã€‚`}
};

function renderTable() {
  const tbody = document.getElementById("arrayTable");
  tbody.innerHTML = '';

  // é¡å¤–æ’å…¥ index = -1 æ¬„ä½ï¼ˆåªåœ¨æ’å…¥æ’åºæ™‚é¡¯ç¤ºï¼‰
  if (algo === "insertion") {
    const tr = document.createElement('tr');
    const tdIdx = document.createElement('td');
    const tdVal = document.createElement('td');
    const tdTag = document.createElement('td');
    tdIdx.textContent = '-1';
    tdVal.textContent = '';
    tdTag.textContent = (j === -1) ? 'ğŸ”´ j' : '';
    tr.appendChild(tdIdx); tr.appendChild(tdVal); tr.appendChild(tdTag);
    tbody.appendChild(tr);
  }

  arr.forEach((val, idx) => {
    const tr = document.createElement('tr');
    const tdIdx = document.createElement('td');
    const tdVal = document.createElement('td');
    const tdTag = document.createElement('td');
    tdIdx.textContent = idx;
    tdVal.textContent = val;
    let tags = [];
    if (idx === i) tags.push("ğŸ”µ i");
    if (idx === j) tags.push("ğŸ”´ j");
    if (algo === "selection" && idx === minIdx) tags.push("â­ min");
    if (algo === "insertion" && idx === i) tags.push("ğŸ—ï¸ key");
    tdTag.textContent = tags.join(' ');
    tr.appendChild(tdIdx); tr.appendChild(tdVal); tr.appendChild(tdTag);
    tbody.appendChild(tr);
  });

  let info = '';
  if (algo === "selection") {
    info = `i = ${i}, j = ${j}, min = ${minIdx}`;
  } else if (algo === "bubble") {
    info = `i = ${i}, j = ${j}`;
  } else if (algo === "insertion") {
    info = `i = ${i}, j = ${j}, key = ${key}`;
  }
  document.getElementById("stateInfo").textContent = info;
}

function init() {
  arr = document.getElementById("arrayInput").value.split(',').map(Number);
  i = 0; j = 0; minIdx = 0;
  algo = document.getElementById("algoSelect").value;
  codeBox.textContent = codes[algo].code;
  analysisBox.innerHTML = codes[algo].analysis;
  actionBox.textContent = '';
  if (algo === "selection") { j = 1; minIdx = 0; }
  if (algo === "bubble") { j = 0; }
  if (algo === "insertion") { i = 1; j = 0; key = arr[1]; }
  renderTable();
}

function step() {
  if (algo === "selection") {
    if (i >= arr.length - 1) return;
    if (j < arr.length) {
      if (arr[j] < arr[minIdx]) minIdx = j;
      j++;
    } else {
      [arr[i], arr[minIdx]] = [arr[minIdx], arr[i]];
      i++; j = i + 1; minIdx = i;
    }
  }
  else if (algo === "bubble") {
    if (i >= arr.length - 1) return;
    if (j < arr.length - i - 1) {
      if (arr[j] > arr[j + 1]) [arr[j], arr[j + 1]] = [arr[j + 1], arr[j]];
      j++;
    } else {
      i++; j = 0;
    }
  }
  else if (algo === "insertion") {
    if (i >= arr.length) return;
    if (j >= 0 && arr[j] > key) {
      arr[j + 1] = arr[j];
      j--;
    } else {
      arr[j + 1] = key;
      i++;
      key = arr[i];
      j = i - 1;
    }
  }
  renderTable();
}
</script>
</body>
</html>




